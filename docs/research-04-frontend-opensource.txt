================================================================================
EchoType v0.2.0 ç ”ç©¶å ±å‘Š #4 â€” å‰ç«¯æ¶æ§‹åˆ†æèˆ‡é–‹æºæ–¹æ¡ˆæ¨è–¦
æ—¥æœŸ: 2026-02-19
================================================================================

ä¸€ã€EchoType ç¾æœ‰å‰ç«¯æ¶æ§‹
================================================================================

1.1 è·¯ç”±çµæ§‹ (App.tsx - HashRouter)
------------------------------------
/           â†’ Hub (ä¸»é é¢ - æ­·å²è¨˜éŒ„ & çµ±è¨ˆ)
/settings   â†’ Settings (è¨­å®šé é¢)
/floating   â†’ FloatingBar (æµ®å‹•éŒ„éŸ³æ¢)
/onboarding â†’ Onboarding (é¦–æ¬¡å•Ÿå‹•æ­¡è¿æµç¨‹)

1.2 æª”æ¡ˆçµæ§‹
-------------
src/
â”œâ”€â”€ App.tsx                    # è·¯ç”±å…¥å£
â”œâ”€â”€ main.tsx                   # React DOM æ›è¼‰é»
â”œâ”€â”€ index.css                  # å…¨å±€è¨­è¨ˆç³»çµ±
â””â”€â”€ components/
    â”œâ”€â”€ Hub.tsx               # ä¸»é é¢ï¼ˆæ­·å² + çµ±è¨ˆï¼‰
    â”œâ”€â”€ Hub.css
    â”œâ”€â”€ Settings.tsx          # è¨­å®šé é¢
    â”œâ”€â”€ FloatingBar.tsx       # æµ®å‹•éŒ„éŸ³æ¢ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
    â”œâ”€â”€ FloatingBar.css
    â””â”€â”€ Onboarding.tsx        # 4 æ­¥é©Ÿæ­¡è¿æµç¨‹

1.3 æŠ€è¡“æ£§
-----------
æ ¸å¿ƒ: react@18.3.1, react-router-dom@6.28.0
å‹•ç•«: framer-motion@11.15.0
åœ–è¡¨: echarts@5.6.0 + echarts-for-react@3.0.2
æ§‹å»º: vite@6.1.0, typescript@5.7.2

Tauri æ’ä»¶:
  @tauri-apps/api@2
  @tauri-apps/plugin-clipboard-manager@2.3.2
  @tauri-apps/plugin-global-shortcut@2
  @tauri-apps/plugin-autostart@2
  @tauri-apps/plugin-dialog@2
  @tauri-apps/plugin-notification@2
  @tauri-apps/plugin-shell@2

1.4 è¨­è¨ˆç³»çµ± (index.css)
-------------------------
è‰²å½©:
  --color-bg:         #0d0d0f          (æ·±é»‘èƒŒæ™¯)
  --color-surface:    rgba(255,255,255,0.04)
  --color-surface-2:  rgba(255,255,255,0.08)
  --color-border:     rgba(255,255,255,0.08)
  --color-text:       #e8e8ed          (æ·ºç°æ–‡å­—)
  --color-text-muted: rgba(232,232,237,0.5)
  --color-accent:     #6366f1          (Indigo)
  --color-accent-2:   #8b5cf6          (Violet)
  --color-success:    #10b981
  --color-danger:     #ef4444
  --color-recording:  #f43f5e          (Rose red)

æ¼¸å±¤:
  --gradient-accent:  linear-gradient(135deg, #6366f1, #8b5cf6)
  --gradient-glow:    radial-gradient(ellipse at center, rgba(99,102,241,0.15), transparent 70%)

ç»ç’ƒæ“¬æ…‹:
  --glass-bg:     rgba(20, 20, 28, 0.8)
  --glass-blur:   blur(20px)
  --glass-border: 1px solid rgba(255,255,255,0.1)

å­—é«”: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', sans-serif

1.5 è¦–çª—é…ç½® (tauri.conf.json)
-------------------------------
ä¸»è¦–çª—: 960Ã—640, æœ€å° 800Ã—500, å¯èª¿æ•´å¤§å°
æµ®å‹•æ¢: 320Ã—80, ç„¡è£é£¾, æ°¸é åœ¨æœ€ä¸Šå±¤, ä¸å¯èª¿æ•´å¤§å°, åˆå§‹éš±è—

1.6 Tauri Commands
-------------------
| å‘½ä»¤             | åƒæ•¸              | è¿”å›å€¼           | ç”¨é€”           |
|------------------|-------------------|------------------|----------------|
| start_recording  | ç„¡                | "ok"             | å•Ÿå‹•éŒ„éŸ³       |
| stop_recording   | ç„¡                | RecordingResult  | åœæ­¢+ASR+æ½¤é£¾  |
| inject_text      | { text: string }  | ()               | æ³¨å…¥æ–‡å­—       |
| get_history      | { limit?: number }| HistoryEntry[]   | æ­·å²è¨˜éŒ„       |
| get_settings     | ç„¡                | Record<str,str>  | å–å¾—è¨­å®š       |
| set_setting      | { key, value }    | ()               | ä¿å­˜è¨­å®š       |
| get_microphones  | ç„¡                | AudioDevice[]    | éº¥å…‹é¢¨åˆ—è¡¨     |
| get_context      | ç„¡                | AppContext        | ç„¦é»Appä¸Šä¸‹æ–‡  |

äº‹ä»¶:
  hotkey-pressed  â†’ å¿«æ·éµæŒ‰ä¸‹
  hotkey-released â†’ å¿«æ·éµé‡‹æ”¾
  inject-failed   â†’ æ–‡å­—æ³¨å…¥å¤±æ•—

1.7 Settings.tsx è¨­å®šé …ç›®
--------------------------
å€å¡Š 1: ASR Engine (whisper_turbo / qwen3_asr)
å€å¡Š 2: Microphone (ç³»çµ±é è¨­ + å‹•æ…‹åˆ—è¡¨)
å€å¡Š 3: AI Polisher Mode (cloud / none) + API Key + API Base URL
å€å¡Š 4: Language (è¼¸å…¥èªè¨€ + è¼¸å‡ºèªè¨€)
å€å¡Š 5: System Integration (é–‹æ©Ÿè‡ªå•Ÿ)
å€å¡Š 6: Privacy & Storage (æ­·å²è¨˜éŒ„ä¿ç•™å¤©æ•¸)

å•é¡Œ: è¨­å®šé é¢å…§å®¹æº¢å‡ºè¦–çª—ï¼Œéœ€è¦ä¿®å¾©æ»¾å‹•

1.8 Onboarding 4 æ­¥é©Ÿ
-----------------------
Step 1: Welcome â€” ğŸ‘‹ æ­¡è¿ä½¿ç”¨ EchoType
Step 2: Privacy â€” ğŸ”’ éš±ç§æ‰¿è«¾ï¼ˆæœ¬åœ°è™•ç†ã€ä¸ä¸Šå‚³ï¼‰
Step 3: Permissions â€” ğŸ” æ¬Šé™è«‹æ±‚ï¼ˆéº¥å…‹é¢¨ + è¼”åŠ©ä½¿ç”¨ï¼‰[TODO]
Step 4: Finish â€” ğŸ‰ è¨­å®šå®Œæˆ + å¿«æ·éµæç¤º

1.9 FloatingBar ç‹€æ…‹æ©Ÿ
-----------------------
idle â†’ recording â†’ processing â†’ done â†’ idle
                                    â†’ inject-failed â†’ (è¤‡è£½) â†’ idle

äºŒã€é–‹æºæ–¹æ¡ˆæ¨è–¦
================================================================================

2.1 macOS å…¨åŸŸéµç›¤ç›£è½
-----------------------

HotKey (soffes/HotKey)
  GitHub: https://github.com/soffes/HotKey
  Stars: ~800
  èªªæ˜: Swift macOS å…¨åŸŸå¿«æ·éµåº«ï¼ŒCarbon APIï¼Œè¼•é‡ SPM
  æ•´åˆ: ä½ â€” ä½†ä¸æ”¯æ´é•·æŒ‰/é»æŒ‰å€åˆ†

KeyboardShortcuts (sindresorhus/KeyboardShortcuts) â˜…æ¨è–¦
  GitHub: https://github.com/sindresorhus/KeyboardShortcuts
  Stars: ~1800
  èªªæ˜: sindresorhus å‡ºå“ï¼Œç´” Swiftï¼Œæ”¯æ´ SwiftUI
  æ•´åˆ: ä½ â€” SPM ç›´æ¥ç”¨

MASShortcut (shpakovski/MASShortcut)
  GitHub: https://github.com/shpakovski/MASShortcut
  Stars: ~3500
  èªªæ˜: è€ç‰Œå¿«æ·éµåº«ï¼Œå« UI éŒ„è£½å…ƒä»¶ï¼ŒObj-C
  æ•´åˆ: ä¸­ â€” éœ€è¦ Obj-C bridging

Sauce (Clipy/Sauce)
  GitHub: https://github.com/Clipy/Sauce
  Stars: ~500
  èªªæ˜: éµç›¤ä½ˆå±€æ„ŸçŸ¥çš„æŒ‰éµç¢¼è½‰æ›åº«
  æ•´åˆ: ä½ â€” è¼”åŠ©ç”¨é€”

Hammerspoon (Hammerspoon/hammerspoon) [åƒè€ƒç”¨]
  GitHub: https://github.com/Hammerspoon/hammerspoon
  Stars: ~12000
  èªªæ˜: Lua è…³æœ¬ macOS è‡ªå‹•åŒ–ï¼Œeventtap æ¨¡çµ„å¯åƒè€ƒ
  æ•´åˆ: åƒè€ƒå…¶ CGEventTap å¯¦ä½œ

æ³¨æ„: é•·æŒ‰/é»æŒ‰å€åˆ†æ²’æœ‰ç¾æˆåº«ï¼Œéœ€è‡ªå·±ç”¨ CGEventTap + è¨ˆæ™‚å™¨å¯¦ç¾ã€‚

2.2 èªéŸ³è½‰æ–‡å­—
--------------

whisper.cpp (ggerganov/whisper.cpp) â˜…æ ¸å¿ƒ
  GitHub: https://github.com/ggerganov/whisper.cpp
  Stars: ~36000+
  èªªæ˜: C/C++ Whisper å¯¦ç¾ï¼Œå« Swift binding + Core ML
  æ•´åˆ: ä¸­ â€” æœ‰å®˜æ–¹ Swift example

whisper-rs (tazz4843/whisper-rs) â˜…Rust æ•´åˆ
  GitHub: https://github.com/tazz4843/whisper-rs
  Stars: ~900+
  èªªæ˜: whisper.cpp çš„ Rust bindingï¼Œé©åˆ Tauri å¾Œç«¯
  æ•´åˆ: ä¸­ â€” éœ€ç·¨è­¯ whisper.cpp

WhisperKit (argmaxinc/WhisperKit) â˜…Apple Silicon æœ€ä½³
  GitHub: https://github.com/argmaxinc/WhisperKit
  Stars: ~3500+
  èªªæ˜: Apple åŸç”Ÿ Swiftï¼ŒCore MLï¼ŒApple Silicon æ·±åº¦å„ªåŒ–
  æ•´åˆ: ä½ â€” ç´” Swift SPM

silero-vad (snakers4/silero-vad)
  GitHub: https://github.com/snakers4/silero-vad
  Stars: ~4000+
  èªªæ˜: èªéŸ³æ´»å‹•åµæ¸¬ï¼Œåˆ¤æ–·ä½•æ™‚é–‹å§‹/åœæ­¢éŒ„éŸ³
  æ•´åˆ: ä¸­ â€” éœ€è¦ ONNX Runtime

cpal (RustAudio/cpal) â˜…Rust éŸ³é »
  GitHub: https://github.com/RustAudio/cpal
  Stars: ~2500+
  èªªæ˜: Rust è·¨å¹³å°éŸ³é » I/Oï¼ŒéŒ„éŸ³ç”¨
  æ•´åˆ: ä½ â€” Tauri Rust å¾Œç«¯ç›´æ¥ç”¨

æ¨è–¦çµ„åˆ:
  WhisperKit (Swift ç«¯) æˆ– whisper-rs (Rust ç«¯)
  + cpal (éŸ³é »éŒ„è£½)
  + silero-vad (èªéŸ³åµæ¸¬)

2.3 macOS æ–‡å­—æ³¨å…¥
-------------------

Accessibility API (åŸç”Ÿ) â˜…æ¨è–¦
  AXUIElementSetAttributeValue ç›´æ¥è¨­å®šç„¦é»å…ƒç´ æ–‡å­—å€¼
  æ•´åˆ: ä¸­ â€” éœ€è‡ªå·±å°è£

Espanso (espanso/espanso) [åƒè€ƒç”¨]
  GitHub: https://github.com/espanso/espanso
  Stars: ~10000
  èªªæ˜: Rust è·¨å¹³å°æ–‡å­—å±•é–‹å™¨ï¼ŒmacOS ç”¨ CGEventTap + å‰ªè²¼æ¿æ³¨å…¥
  æ•´åˆ: åƒè€ƒå…¶ Rust åŸå§‹ç¢¼

Maccy (p0deje/Maccy) [åƒè€ƒç”¨]
  GitHub: https://github.com/p0deje/Maccy
  Stars: ~12000
  èªªæ˜: å‰ªè²¼æ¿ç®¡ç†å™¨ï¼Œå¯åƒè€ƒå…¶è²¼ä¸Šé‚è¼¯
  æ•´åˆ: åƒè€ƒç”¨

æ¨è–¦ç­–ç•¥:
  çŸ­æ–‡æœ¬ â†’ Accessibility API ç›´æ¥æ³¨å…¥
  é•·æ–‡æœ¬ â†’ å‰ªè²¼æ¿ + Cmd+V æ¨¡æ“¬
  Espanso çš„ Rust åŸå§‹ç¢¼æ˜¯æœ€å¥½çš„åƒè€ƒ

2.4 UI çµ„ä»¶ (React)
--------------------

shadcn/ui (shadcn/ui) â˜…æœ€æ¨è–¦
  GitHub: https://github.com/shadcn/ui
  Stars: ~75000+
  èªªæ˜: Radix + Tailwind å…ƒä»¶é›†ï¼Œè¤‡è£½è²¼ä¸Šå¼ä½¿ç”¨
  æ•´åˆ: ä½ â€” é©åˆè¨­å®šé é¢

driver.js (kamranahmedse/driver.js)
  GitHub: https://github.com/kamranahmedse/driver.js
  Stars: ~22000+
  èªªæ˜: è¼•é‡ç´šå°è¦½/highlight åº«ï¼Œæ¡†æ¶ç„¡é—œ
  æ•´åˆ: ä½ â€” é©åˆ onboarding

react-joyride (gilbarbara/react-joyride)
  GitHub: https://github.com/gilbarbara/react-joyride
  Stars: ~7000+
  èªªæ˜: React onboarding/å°è¦½å…ƒä»¶
  æ•´åˆ: ä½

Radix UI (radix-ui/primitives)
  GitHub: https://github.com/radix-ui/primitives
  Stars: ~16000+
  èªªæ˜: ç„¡æ¨£å¼ React UI åŸèª
  æ•´åˆ: ä½

Floating UI (floating-ui/floating-ui)
  GitHub: https://github.com/floating-ui/floating-ui
  Stars: ~30000+
  èªªæ˜: æµ®å‹•å®šä½åº«
  æ•´åˆ: ä½

2.5 Tauri å®˜æ–¹æ’ä»¶
-------------------

æ‰€æœ‰åœ¨ https://github.com/tauri-apps/plugins-workspace monorepo:
  - tauri-plugin-global-shortcut (åŸºæœ¬å¿«æ·éµï¼Œä¸æ”¯æ´é•·æŒ‰)
  - tauri-plugin-autostart (é–‹æ©Ÿè‡ªå•Ÿ)
  - tauri-plugin-shell (å¤–éƒ¨å‘½ä»¤)
  - tauri-plugin-store (æŒä¹…åŒ– key-value å„²å­˜)
  - tauri-plugin-notification (ç³»çµ±é€šçŸ¥)
  - tauri-plugin-updater (è‡ªå‹•æ›´æ–°)

2.6 macOS ä¸Šä¸‹æ–‡æ„ŸçŸ¥
---------------------

ä¸éœ€è¦ç¬¬ä¸‰æ–¹åº«ï¼ŒåŸç”Ÿ API è¶³å¤ :
  - ç„¦é» App: NSWorkspace.shared.frontmostApplication
  - è¼¸å…¥æ¡†å…§å®¹: AXUIElementCopyAttributeValue (Accessibility API)
  - ç€è¦½å™¨ URL: AppleScript/JXA
    tell application "Google Chrome" to get URL of active tab

ä¸‰ã€EchoType æ•´åˆå»ºè­°ç¸½çµ
================================================================================

æœ€é«˜å„ªå…ˆç´šå¼•å…¥:
  1. WhisperKit æˆ– whisper-rs â€” èªéŸ³è½‰æ–‡å­—æ ¸å¿ƒ
  2. KeyboardShortcuts (sindresorhus) â€” å…¨åŸŸå¿«æ·éµ
  3. cpal â€” Rust ç«¯éŸ³é »éŒ„è£½
  4. shadcn/ui â€” è¨­å®šé é¢ UI
  5. Tauri å®˜æ–¹æ’ä»¶ (store, updater)

åƒè€ƒä½†ä¸ç›´æ¥å¼•å…¥:
  - Espanso â€” å­¸ç¿’ macOS æ–‡å­—æ³¨å…¥ç­–ç•¥
  - Hammerspoon â€” å­¸ç¿’ CGEventTap å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥

ä¸éœ€è¦ç¬¬ä¸‰æ–¹åº«:
  - æ¬Šé™ç®¡ç† â€” åŸç”Ÿ API è¶³å¤ 
  - ä¸Šä¸‹æ–‡æ„ŸçŸ¥ â€” NSWorkspace + Accessibility + AppleScript
  - æ–‡å­—æ³¨å…¥ â€” è‡ªå·±å°è£ Accessibility API + å‰ªè²¼æ¿æ–¹æ¡ˆ

å››ã€v0.2.0 å¾…è¾¦äº‹é …å„ªå…ˆç´š
================================================================================

P0 (å¿…é ˆ):
  1. ä¿®å¾©è¨­å®šé é¢æ»¾å‹•æº¢å‡ºå•é¡Œ
  2. å¯¦ä½œ Onboarding æ¬Šé™è«‹æ±‚æµç¨‹ï¼ˆéº¥å…‹é¢¨ + Accessibilityï¼‰
  3. å¯¦ä½œ fn éµé•·æŒ‰/é»æŒ‰éŒ„éŸ³é‚è¼¯ (CGEventTap)

P1 (é‡è¦):
  4. æ¬Šé™ç‹€æ…‹å„€è¡¨æ¿ï¼ˆè¨­å®šé é¢ä¸­ï¼‰
  5. å¿«æ·éµè‡ªè¨‚ UI
  6. æ¯ 2 ç§’è¼ªè©¢ Accessibility æ¬Šé™

P2 (åŠ åˆ†):
  7. èƒŒæ™¯éŸ³é »éœéŸ³ï¼ˆéŒ„éŸ³æ™‚ï¼‰
  8. è‡ªå‹•æ›´æ–°åŠŸèƒ½ (tauri-plugin-updater)
  9. æ­¡è¿é é¢å‹•ç•«å„ªåŒ–
